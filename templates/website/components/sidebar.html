<!-- Sidebar Filter Component -->
<aside class="hidden lg:block space-y-6 sticky top-20">

  <!-- Price Filter Box -->
  <div class="bg-white shadow-md rounded-xl p-5 border border-gray-100">
    <div class="flex items-center justify-between mb-4">
      <h5 class="text-lg font-bold text-gray-900">Price Range</h5>
      <button type="button" id="resetPrice" class="text-xs  cursor-pointer text-orange-600 hover:text-orange-700 font-medium">
        Reset
      </button>
    </div>

    <form class="space-y-4">
      <div class="flex gap-3">
        <div class="flex-1">
          <label for="minPrice" class="text-xs font-semibold text-gray-600 uppercase mb-1 block">Min Price</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm">Rs</span>
            <input id="minPrice" type="number" placeholder="0" min="0"
              class="w-full pl-8 pr-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm font-medium text-gray-900">
          </div>
        </div>
        <div class="flex-1">
          <label for="maxPrice" class="text-xs font-semibold text-gray-600 uppercase mb-1 block">Max Price</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm">Rs</span>
            <input id="maxPrice" type="number" placeholder="1000" min="0"
              class="w-full pl-8 pr-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm font-medium text-gray-900">
          </div>
        </div>
      </div>

      <div class="space-y-2">
        <div class="flex items-center justify-between text-xs text-gray-600">
          <span>Rs 0</span>
          <span id="rangeValue" class="font-bold text-orange-600">Rs 1000</span>
        </div>
        <input type="range" id="priceRange" min="0" max="1000" value="1000" step="10"
          class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-orange-500">
      </div>
    </form>
  </div>

  <!-- Categories Filter Box -->
  <div class="bg-white shadow-md rounded-xl p-5 border border-gray-100">
    <div class="flex items-center justify-between mb-4">
      <h5 class="text-lg font-bold text-gray-900">Categories</h5>
      <button type="button" id="resetCategories" class="cursor-pointer  text-xs text-orange-600 hover:text-orange-700 font-medium">
        Clear
      </button>
    </div>

    <div class="space-y-1 max-h-64 overflow-y-auto pr-2">
      {% for category in categories %}
        <label class="flex items-center gap-2.5 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition {% if category.parent %}pl-6{% endif %}">
          <input type="checkbox" name="category" value="{{ category.id }}" 
                 class="w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-2 focus:ring-orange-500 cursor-pointer">
          <span class="text-sm {% if category.parent %}text-gray-600{% else %}font-medium text-gray-700{% endif %} group-hover:text-orange-600 transition flex-1">
            {% if category.parent %}
              <i class="fas fa-arrow-right text-xs text-gray-400 mr-1"></i>
            {% endif %}
            {{ category.name }}
          </span>
          <span class="text-xs text-gray-400">{{ category.product_count }}</span>
        </label>
      {% endfor %}
    </div>
  </div>
</aside>

<!-- Scripts for Reset Buttons and Price Range -->
<script>
  // Reset categories
  document.getElementById('resetCategories').addEventListener('click', function(e){
    e.preventDefault();
    document.querySelectorAll('input[name="category"]').forEach(cb => cb.checked = false);
  });

  // Reset price inputs
  document.getElementById('resetPrice').addEventListener('click', function(e){
    e.preventDefault();
    document.getElementById('minPrice').value = '';
    document.getElementById('maxPrice').value = '';
    const range = document.getElementById('priceRange');
    range.value = range.max;
    document.getElementById('rangeValue').textContent = `Rs ${range.value}`;
  });

  // Update range value display dynamically
  const priceRange = document.getElementById('priceRange');
  priceRange.addEventListener('input', function() {
    document.getElementById('rangeValue').textContent = `Rs ${this.value}`;
  });
</script>
